/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/checkout6-custom.js":
/*!*********************************!*\
  !*** ./src/checkout6-custom.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _controller_DeliverController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./controller/DeliverController */ \"./src/controller/DeliverController.js\");\n// // import AddressController from './controller/AddressController';\n// import CollectController from './controller/CollectController';\n // import FormController from './controller/FormController';\n// import ViewController from './controller/ViewController';\n// // AddressController.init();\n// ViewController.init();\n// FormController.init();\n// CollectController.init();\n\n_controller_DeliverController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init();\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/checkout6-custom.js?");

/***/ }),

/***/ "./src/controller/DeliverController.js":
/*!*********************************************!*\
  !*** ./src/controller/DeliverController.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _partials_Deliver_DeliverContainer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../partials/Deliver/DeliverContainer */ \"./src/partials/Deliver/DeliverContainer.js\");\n/* harmony import */ var _partials_Deliver_ExtraFieldsContainer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../partials/Deliver/ExtraFieldsContainer */ \"./src/partials/Deliver/ExtraFieldsContainer.js\");\n/* harmony import */ var _partials_Deliver_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../partials/Deliver/utils */ \"./src/partials/Deliver/utils.js\");\n/* harmony import */ var _utils_const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/const */ \"./src/utils/const.js\");\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/functions */ \"./src/utils/functions.js\");\n\n\n\n\n\n\nconst DeliverController = (() => {\n  const state = {\n    view: 'list',\n    hasFurn: false,\n    hasTVs: false,\n    hasSim: false\n  };\n\n  const addShippingMethod = () => {\n    $('#delivery-packages-options').clone().appendTo('#bash-delivery-options');\n  };\n\n  const setupDeliver = () => {\n    if ($('#bash--deliver-container').length) return;\n\n    if (window.vtexjs.checkout.orderForm) {\n      const {\n        items\n      } = window.vtexjs.checkout.orderForm;\n      const {\n        hasFurniture,\n        hasTVs,\n        hasSimCards\n      } = (0,_utils_functions__WEBPACK_IMPORTED_MODULE_4__.getSpecialCategories)(items);\n      state.hasFurn = hasFurniture;\n      state.hasTVs = hasTVs;\n      state.hasSim = hasSimCards;\n    }\n\n    $('#postalCode-finished-loading').after((0,_partials_Deliver_DeliverContainer__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n      hasFurn: state.hasFurn\n    }));\n    const showExtraFields = state.hasFurn || state.hasSim || state.hasTVs;\n\n    if (showExtraFields) {\n      $('#bash-delivery-options').before((0,_partials_Deliver_ExtraFieldsContainer__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n        hasFurn: state.hasFurn,\n        hasSim: state.hasSim,\n        hasTV: state.hasTVs\n      }));\n    }\n\n    addShippingMethod(); // Form validation\n\n    $('select, input').off('invalid');\n    $('select, input').on('invalid', function () {\n      $(this[0]).parents('form').addClass('show-form-errors');\n      $(this)[0].setCustomValidity(' ');\n    }).on('change keyUp', function () {\n      $(this)[0].setCustomValidity('');\n    });\n  };\n\n  $(window).on('hashchange', () => {\n    if (window.location.hash === _utils_const__WEBPACK_IMPORTED_MODULE_3__.STEPS.SHIPPING) {\n      console.info('Hash change');\n      setupDeliver();\n    }\n  }); // {\n  //   action: \"setDeliverView\",\n  //   view: \"select-address\"\n  // }\n  // Change view\n\n  $(document).on('click', 'a[data-view]', function (e) {\n    e.preventDefault();\n    const viewTarget = $(this).data('view');\n    const content = decodeURIComponent($(this).data('content'));\n    window.postMessage({\n      action: 'setDeliveryView',\n      view: viewTarget,\n      content\n    });\n  }); // Select address\n\n  $(document).on('change', 'input[type=\"radio\"][name=\"selected-address\"]', function () {\n    const address = (0,_partials_Deliver_utils__WEBPACK_IMPORTED_MODULE_2__.parseAttribute)($(`#address-${this.value}`).data('address'));\n    (0,_partials_Deliver_utils__WEBPACK_IMPORTED_MODULE_2__.setAddress)(address);\n  });\n  $(document).on('submit', '#bash--address-form', _partials_Deliver_utils__WEBPACK_IMPORTED_MODULE_2__.submitAddressForm);\n  $(document).on('submit', '#bash--delivery-form', _partials_Deliver_utils__WEBPACK_IMPORTED_MODULE_2__.submitDeliveryForm); // Form validation\n\n  window.addEventListener('message', event => {\n    const {\n      data\n    } = event;\n    if (!data || !data.action) return;\n\n    switch (data.action) {\n      case 'setDeliveryView':\n        document.querySelector('.bash--delivery-container').setAttribute('data-view', data.view);\n\n        if (data.view === 'address-form') {\n          if (data.content) {\n            const address = JSON.parse(decodeURIComponent($(`#${data.content}`).data('address')));\n            (0,_partials_Deliver_utils__WEBPACK_IMPORTED_MODULE_2__.populateAddressForm)(address);\n          }\n        }\n\n        break;\n\n      default:\n        console.error('Unknown action', data.action);\n    }\n  });\n  return {\n    state,\n    init: () => {}\n  };\n})();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeliverController);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/controller/DeliverController.js?");

/***/ }),

/***/ "./src/partials/Deliver/AddressForm.js":
/*!*********************************************!*\
  !*** ./src/partials/Deliver/AddressForm.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_phoneFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/phoneFields */ \"./src/utils/phoneFields.js\");\n/* harmony import */ var _Elements_FormField__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Elements/FormField */ \"./src/partials/Deliver/Elements/FormField.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/partials/Deliver/utils.js\");\n\n\n\n\nconst AddressForm = () => {\n  const fields = [{\n    name: 'addressId',\n    type: 'hidden',\n    value: '',\n    required: false\n  }, {\n    name: 'addressName',\n    type: 'hidden',\n    value: '',\n    required: false\n  }, {\n    name: 'street',\n    label: 'Street address',\n    required: true,\n    value: ''\n  }, {\n    name: 'addressType',\n    label: 'Address type',\n    required: true,\n    type: 'radio',\n    options: [{\n      value: 'residential',\n      label: 'Residential',\n      checked: true\n    }, {\n      value: 'business',\n      label: 'Business'\n    }]\n  }, {\n    name: 'number',\n    label: 'Building/Complex and number',\n    required: false,\n    value: ''\n  }, {\n    name: 'neighborhood',\n    label: 'Suburb',\n    value: ''\n  }, {\n    name: 'city',\n    label: 'City',\n    required: true,\n    value: ''\n  }, {\n    name: 'postalCode',\n    label: 'Postal code',\n    value: '',\n    type: 'tel',\n    minlength: 4,\n    maxLength: 4\n  }, {\n    type: 'note',\n    required: false,\n    name: 'suburb-postal-reminder',\n    value: 'Make sure to specify the correct Suburb and Postal code so we can easily find your address.'\n  }, {\n    name: 'state',\n    label: 'Province',\n    type: 'dropdown',\n    options: [{\n      value: '',\n      label: 'Select'\n    }, {\n      value: 'EC',\n      label: 'Eastern Cape'\n    }, {\n      value: 'FS',\n      label: 'Free State'\n    }, {\n      value: 'GP',\n      label: 'Gauteng'\n    }, {\n      value: 'KZN',\n      label: 'KwaZulu-Natal'\n    }, {\n      value: 'LP',\n      label: 'Limpopo'\n    }, {\n      value: 'MP',\n      label: 'Mpumalanga'\n    }, {\n      value: 'NC',\n      label: 'Northern Cape'\n    }, {\n      value: 'NW',\n      label: 'North West'\n    }, {\n      value: 'WC',\n      label: 'Western Cape'\n    }]\n  }, {\n    type: 'note',\n    required: false,\n    name: 'country-display',\n    label: 'Country',\n    value: 'South Africa'\n  }, {\n    type: 'hidden',\n    required: true,\n    name: 'country',\n    value: 'ZAF'\n  }, {\n    name: 'receiverName',\n    label: 'Recipient’s name',\n    required: true,\n    value: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getBestRecipient)()\n  }, {\n    name: 'complement',\n    label: 'Recipient’s mobile number',\n    required: true,\n    value: (0,_utils_phoneFields__WEBPACK_IMPORTED_MODULE_0__.getBestPhoneNumber)(),\n    type: 'tel',\n    helperText: 'We send shipping updates to this number.'\n  }];\n  const formFields = fields.map(field => (0,_Elements_FormField__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(field)).join('');\n  return `\n  <form id=\"bash--address-form\" method=\"post\">\n    ${formFields}\n\n    <button \n      class=\"submit btn-go-to-payment btn btn-large btn-success\"\n      id=\"btn-save-address\" \n      type=\"submit\"\n    >\n      Save address\n    </button>\n  </form>\n  \n  `;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AddressForm);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/AddressForm.js?");

/***/ }),

/***/ "./src/partials/Deliver/AddressListing.js":
/*!************************************************!*\
  !*** ./src/partials/Deliver/AddressListing.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Elements_Radio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elements/Radio */ \"./src/partials/Deliver/Elements/Radio.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/partials/Deliver/utils.js\");\n\n\n\nconst AddressListing = address => {\n  const {\n    number,\n    street,\n    neighborhood,\n    postalCode,\n    city,\n    receiverName,\n    complement,\n    id\n  } = address;\n  const addressLine = [`${number ?? ''} ${street}`, neighborhood ?? city, postalCode].join(', ');\n  const contactLine = [receiverName, complement].join(' - ');\n  const {\n    address: selectedAddress\n  } = window?.vtexjs?.checkout?.orderForm?.shippingData; // TODO - later pull address from DB instead of attribute.\n\n  const addressString = encodeURIComponent(JSON.stringify(address));\n  return `\n<label id=\"address-${id}\" class=\"bash--address-listing\" data-address=\"${addressString}\">\n  <div class=\"address-radio\">\n  ${(0,_Elements_Radio__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    name: 'selected-address',\n    options: [{\n      checked: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.isSelectedAddress)(address, selectedAddress),\n      value: id\n    }]\n  })}\n  </div>\n  <div class=\"address-text\">\n    <div>${addressLine}</div>    \n    <div>${contactLine}</div>  \n  </div>\n  <div class=\"address-edit\">\n    <a href=\"#\" data-view=\"address-form\" data-content=\"address-${id}\">\n      Edit\n    </a>\n  </div>\n</label>\n`;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AddressListing);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/AddressListing.js?");

/***/ }),

/***/ "./src/partials/Deliver/AddressSearch.js":
/*!***********************************************!*\
  !*** ./src/partials/Deliver/AddressSearch.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Elements_FormField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elements/FormField */ \"./src/partials/Deliver/Elements/FormField.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/partials/Deliver/utils.js\");\n\n\n\nconst AddressSearch = () => {\n  setTimeout(() => {\n    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.initGoogleAutocomplete)();\n  }, 500);\n  return (0,_Elements_FormField__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    name: 'address-search',\n    placeholder: 'Start typing an address...',\n    autoComplete: 'off'\n  });\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AddressSearch);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/AddressSearch.js?");

/***/ }),

/***/ "./src/partials/Deliver/Addresses.js":
/*!*******************************************!*\
  !*** ./src/partials/Deliver/Addresses.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/functions */ \"./src/utils/functions.js\");\n/* harmony import */ var _utils_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/services */ \"./src/utils/services.js\");\n/* harmony import */ var _AddressListing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AddressListing */ \"./src/partials/Deliver/AddressListing.js\");\n\n\n\n\nconst Addresses = () => {\n  (0,_utils_services__WEBPACK_IMPORTED_MODULE_1__.getAddresses)().then(({\n    data: addresses\n  }) => {\n    // if(addresses.length < 1)... go to Add Address\n    const addressesHtml = addresses.map(address => (0,_AddressListing__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(address));\n    document.getElementById('bash-address-list').innerHTML = addressesHtml.join('');\n    (0,_utils_functions__WEBPACK_IMPORTED_MODULE_0__.clearLoaders)();\n  }).catch(e => {\n    console.error('ERROR getAddresses', e);\n    throw new Error('Error getAddresses', e.message);\n  });\n  return `\n <div class=\"bash--addresses shimmer\" id=\"bash-address-list\">\n    Loading addresses...\n  </div>  \n  `;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Addresses);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Addresses.js?");

/***/ }),

/***/ "./src/partials/Deliver/DeliverContainer.js":
/*!**************************************************!*\
  !*** ./src/partials/Deliver/DeliverContainer.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/const */ \"./src/utils/const.js\");\n/* harmony import */ var _Addresses__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Addresses */ \"./src/partials/Deliver/Addresses.js\");\n/* harmony import */ var _AddressForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AddressForm */ \"./src/partials/Deliver/AddressForm.js\");\n/* harmony import */ var _AddressSearch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AddressSearch */ \"./src/partials/Deliver/AddressSearch.js\");\n\n\n\n\n\nconst DeliverContainer = ({\n  hasFurn\n}) => `\n  <div class=\"bash--delivery-container\" data-view=\"select-address\">\n  \n    <section class=\"bash--delivery-view\" data-section=\"select-address\">\n    <div class=\"bash--heading\">\n        <h2>Delivery address</h2>\n        <a href=\"#\" data-view=\"address-search\">Add address</a>\n      </div>\n      ${(0,_Addresses__WEBPACK_IMPORTED_MODULE_1__[\"default\"])()}\n    </section>\n\n    <section class=\"bash--delivery-view\" data-section=\"address-search\">\n      <div class=\"bash--heading\">\n        <h2>Add a new delivery address</h2>\n        <a href=\"#\" data-view=\"select-address\">&lt; Back</a>\n      </div>\n      ${(0,_AddressSearch__WEBPACK_IMPORTED_MODULE_3__[\"default\"])()} \n    </section>\n    \n    <section class=\"bash--delivery-view\" data-section=\"address-form\">\n      <div class=\"bash--heading\">\n        <h2>Delivery address</h2>\n        <a href=\"#\" data-view=\"address-search\">&lt; Back</a>\n      </div>\n      ${(0,_AddressForm__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()}\n    </section>\n\n   <form name=\"bash-delivery-form\" method=\"post\">\n\n    <section id=\"bash-delivery-options\" class=\"shipping-method bash--delivery-view\" data-section=\"select-address\">\n      <hr>\n      <div class=\"bash--heading\">\n        <h2>Delivery options</h2>\n        ${hasFurn ? _utils_const__WEBPACK_IMPORTED_MODULE_0__.FURNITURE_FEE_LINK : ''}\n      </div>\n      <button \n        class=\"submit btn-go-to-payment btn btn-large btn-success\"\n        id=\"btn-save-delivery\" \n        type=\"submit\"a>\n        Go to payment\n      </button>\n    </section>\n\n   </form>\n   \n  </div>`;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeliverContainer);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/DeliverContainer.js?");

/***/ }),

/***/ "./src/partials/Deliver/Elements/Checkbox.js":
/*!***************************************************!*\
  !*** ./src/partials/Deliver/Elements/Checkbox.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst Checkbox = ({\n  name,\n  label,\n  checked\n}) => `\n \n  <p class=\"tfg-custom-checkbox\">\n    <label class=\"tfg-checkbox-label\">\n       <input \n        type='checkbox' \n        name=\"${name}\" \n        id=\"tfg-rica-same-address\" ${checked ? \"checked='checked'\" : ''} /> ${label}</label>\n  </p>\n  `;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Checkbox);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Elements/Checkbox.js?");

/***/ }),

/***/ "./src/partials/Deliver/Elements/DropDown.js":
/*!***************************************************!*\
  !*** ./src/partials/Deliver/Elements/DropDown.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst DropDown = ({\n  name,\n  disabled = false,\n  options,\n  required\n}) => {\n  const hasASelectedOption = options.find(option => option.selected === true);\n  return `\n  <select \n    name=\"${name}\" \n    ${required ? ' required ' : ''} \n    ${disabled ? ' disabled ' : ''} \n    id=\"bash--input-${name}\" \n    class=\"input-large\" \n  >\n  ${options.map(({\n    value,\n    label,\n    selected\n  }, index) => `\n    <option \n    ${index === 0 ? ' disabled ' : ''}\n    ${index === 0 && !hasASelectedOption ? ' selected ' : ''}\n    ${selected ? ' selected ' : ''}\n      value=\"${value}\" \n    >${label}</option>\n    `).join('')}\n  </select>\n  `;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DropDown);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Elements/DropDown.js?");

/***/ }),

/***/ "./src/partials/Deliver/Elements/FormField.js":
/*!****************************************************!*\
  !*** ./src/partials/Deliver/Elements/FormField.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Checkbox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Checkbox */ \"./src/partials/Deliver/Elements/Checkbox.js\");\n/* harmony import */ var _DropDown__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DropDown */ \"./src/partials/Deliver/Elements/DropDown.js\");\n/* harmony import */ var _Note__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Note */ \"./src/partials/Deliver/Elements/Note.js\");\n/* harmony import */ var _Radio__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Radio */ \"./src/partials/Deliver/Elements/Radio.js\");\n/* harmony import */ var _TextField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TextField */ \"./src/partials/Deliver/Elements/TextField.js\");\n\n\n\n\n\n\nconst FormField = ({\n  label,\n  name,\n  value = '',\n  required = true,\n  type = 'text',\n  placeholder,\n  autoComplete = 'on',\n  maxLength,\n  minlength,\n  disabled = false,\n  options,\n  checked,\n  error = 'This field is required.'\n}) => {\n  const fieldId = name.replace(/\\s/g, '-');\n\n  const formField = () => {\n    switch (type) {\n      case 'radio':\n        return (0,_Radio__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n          name,\n          options\n        });\n\n      case 'dropdown':\n        return (0,_DropDown__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n          name,\n          disabled,\n          options,\n          required\n        });\n\n      case 'note':\n        return (0,_Note__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n          name,\n          value\n        });\n\n      case 'checkbox':\n        return (0,_Checkbox__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n          name,\n          label,\n          checked\n        });\n\n      default:\n        return (0,_TextField__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n          name,\n          value,\n          required,\n          type,\n          placeholder,\n          autoComplete,\n          maxLength,\n          minlength\n        });\n    }\n  }; // TODO add drop downs, etc.\n\n\n  return `\n<p class=\"input bash--${type}field-${name.replace(/\\s/g, '-')} bash--${type} ${required ? 'required' : 'optional'}\">\n  ${label && type !== 'checkbox' ? `<label id=\"bash--label-${fieldId}\" for=\"bash--input-${fieldId}\">${label}</label>` : ''}\n ${formField()}\n  ${required ? `<span class=\"bash--field-error\">${error}</span>` : ''}\n\n</p>  \n`;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FormField);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Elements/FormField.js?");

/***/ }),

/***/ "./src/partials/Deliver/Elements/Note.js":
/*!***********************************************!*\
  !*** ./src/partials/Deliver/Elements/Note.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst Note = ({\n  value,\n  name\n}) => `\n  <div class=\"bash--note-field ${name}\">\n  ${value}\n  </div>\n  `;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Note);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Elements/Note.js?");

/***/ }),

/***/ "./src/partials/Deliver/Elements/Radio.js":
/*!************************************************!*\
  !*** ./src/partials/Deliver/Elements/Radio.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst Radio = ({\n  name,\n  options = []\n}) => `\n  \n  <div class=\"bash--radio-options\">\n  ${options.map(({\n  value,\n  label,\n  checked = false,\n  disabled = false\n}) => `\n      <label class=\"bash--radio-option\" id=\"radio-label-${name}-${value}\">\n        <input type=\"radio\" \n          ${checked ? \"checked='checked'\" : ''} \n          ${disabled ? \"disabled='disabled'\" : ''} \n          value=\"${value ?? ''}\" \n          name=\"${name}\" \n          id=\"radio-${name}-${value}\"\n        />\n          <span class=\"radio-icon\"></span> \n          ${label ? `<span class=\"radio-label\">${label}</span>` : ''}\n      </label>\n    `).join('')}\n   \n  </div>\n  `;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Radio);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Elements/Radio.js?");

/***/ }),

/***/ "./src/partials/Deliver/Elements/TextField.js":
/*!****************************************************!*\
  !*** ./src/partials/Deliver/Elements/TextField.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst TextField = ({\n  name,\n  value = '',\n  required = true,\n  type = 'text',\n  placeholder,\n  autoComplete = 'on',\n  minLength = 0,\n  maxLength = 0\n}) => {\n  const fieldId = name.replace(/\\s/g, '-');\n  return `\n  <input \n    ${required ? ' required ' : ''}\n    autocomplete=\"${autoComplete}\" \n    id=\"bash--input-${fieldId}\" \n    type=\"${type}\" \n    name=\"${name}\" \n    ${minLength > 0 ? `minlength=\"${minLength}\"` : ''}\n    ${maxLength > 0 ? `maxlength=\"${maxLength}\"` : ''}\n    placeholder=\"${placeholder ?? ''}\" \n    class=\"input-xlarge\" \n    value=\"${value}\" \n  />\n`;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TextField);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/Elements/TextField.js?");

/***/ }),

/***/ "./src/partials/Deliver/ExtraFieldsContainer.js":
/*!******************************************************!*\
  !*** ./src/partials/Deliver/ExtraFieldsContainer.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _FurnitureForm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FurnitureForm */ \"./src/partials/Deliver/FurnitureForm.js\");\n/* harmony import */ var _RICAForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RICAForm */ \"./src/partials/Deliver/RICAForm.js\");\n/* harmony import */ var _TVLicenseForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TVLicenseForm */ \"./src/partials/Deliver/TVLicenseForm.js\");\n\n\n\n\nconst ExtraFieldsContainer = ({\n  hasFurn,\n  hasTV,\n  hasSim\n}) => {\n  const showFurnitureForm = `\n    <div id=\"furniture-form\">\n      <hr>\n      <div class=\"bash--heading\">\n        <h2>Furniture information needed</h2>\n      </div>\n      <p class=\"tfg-custom-subtitle\">\n        We need some more information to prepare delivery of your furniture items to your address.\n        <br>\n        <br>\n        Please ensure sufficient space to receive the goods and keep in mind \n        that our couriers aren't able to hoist goods onto balconies.\n      </p>\n      ${(0,_FurnitureForm__WEBPACK_IMPORTED_MODULE_0__[\"default\"])()}\n    </div>\n  `;\n  const showTVLicenseForm = `\n    <div id=\"tv-license-form\">\n      <hr>\n      <div class=\"bash--heading\">\n        <h3>TV license information needed</h3>\n        <p class=\"tfg-custom-subtitle\">Please provide your ID number to validate your TV Licence.</p>\n      </div>\n      ${(0,_TVLicenseForm__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()}\n    </div>\n  `;\n  const showRICAForm = `\n    <div id=\"rica-form\">\n      <hr>\n      <div class=\"bash--heading\">\n        <h3>Rica information required</h3>\n        <p class=\"tfg-custom-subtitle\">\n          To RICA your SIM card, provide your SA ID (or foreign passport) number and your address as\n          it appears on a valid proof of residence.\n        </p>\n      </div>\n        ${(0,_RICAForm__WEBPACK_IMPORTED_MODULE_1__[\"default\"])()}\n    </div>\n    `;\n  return `\n  <section class=\"bash--extra-fields bash--delivery-view\" data-section=\"select-address\">\n    ${hasFurn ? showFurnitureForm : ''}\n    ${hasTV ? showTVLicenseForm : ''}\n    ${hasSim ? showRICAForm : ''}\n  </section>`;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExtraFieldsContainer);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/ExtraFieldsContainer.js?");

/***/ }),

/***/ "./src/partials/Deliver/FurnitureForm.js":
/*!***********************************************!*\
  !*** ./src/partials/Deliver/FurnitureForm.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Elements_FormField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elements/FormField */ \"./src/partials/Deliver/Elements/FormField.js\");\n // import furnitureForm from './constants';\n\nconst furnitureForm = {\n  buildingType: [{\n    value: '',\n    label: 'Please select',\n    disabled: true\n  }, {\n    value: 'freeStanding',\n    label: 'Free standing'\n  }, {\n    value: 'houseInComplex',\n    label: 'House in complex'\n  }, {\n    value: 'townhouse',\n    label: 'Townhouse'\n  }, {\n    value: 'apartment',\n    label: 'Apartment'\n  }],\n  parkingDistance: [{\n    value: '',\n    label: 'Please select',\n    disabled: true\n  }, {\n    value: 15,\n    label: '15 meters'\n  }, {\n    value: 25,\n    label: '25 meters'\n  }, {\n    value: 50,\n    label: '50 meters'\n  }, {\n    value: 100,\n    label: '100+ meters'\n  }],\n  deliveryFloor: [{\n    value: '',\n    label: 'Please select',\n    disabled: true\n  }, {\n    value: 'ground',\n    label: 'Ground'\n  }, {\n    value: '1',\n    label: '1'\n  }, {\n    value: '2',\n    label: '2'\n  }, {\n    value: '3+',\n    label: '3+'\n  }],\n  liftStairs: [{\n    value: '',\n    label: 'Please select',\n    disabled: true\n  }, {\n    value: 'lift',\n    label: 'Lift'\n  }, {\n    value: 'stairs',\n    label: 'Stairs'\n  }]\n};\n\nconst FurnitureForm = () => {\n  const {\n    buildingType,\n    parkingDistance,\n    deliveryFloor,\n    liftStairs\n  } = furnitureForm;\n  const fields = [{\n    name: 'buildingType',\n    label: 'Building Type',\n    required: true,\n    type: 'dropdown',\n    options: buildingType\n  }, {\n    name: 'parkingDistance',\n    label: 'Parking Distance',\n    required: true,\n    type: 'dropdown',\n    options: parkingDistance\n  }, {\n    name: 'deliveryFloor',\n    label: 'Delivery Floor',\n    required: true,\n    type: 'dropdown',\n    options: deliveryFloor\n  }, {\n    name: 'liftStairs',\n    label: 'Lift or Stairs',\n    required: true,\n    type: 'dropdown',\n    options: liftStairs\n  }, {\n    name: 'hasSufficientSpace',\n    label: 'Is there sufficent corner/passage door space?',\n    value: false,\n    type: 'checkbox',\n    checked: false\n  }, {\n    name: 'assembleFurniture',\n    label: 'Would you like us to assemble your furniture items?',\n    type: 'checkbox',\n    value: false,\n    checked: false\n  }];\n  const formFields = fields.map(field => (0,_Elements_FormField__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(field)).join('');\n  return `\n    ${formFields}\n  `;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FurnitureForm);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/FurnitureForm.js?");

/***/ }),

/***/ "./src/partials/Deliver/RICAForm.js":
/*!******************************************!*\
  !*** ./src/partials/Deliver/RICAForm.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Elements_FormField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elements/FormField */ \"./src/partials/Deliver/Elements/FormField.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/partials/Deliver/utils.js\");\n\n\n\nconst RICAForm = () => {\n  const {\n    shippingData: {\n      selectedAddress\n    }\n  } = window.vtexjs.checkout.orderForm;\n  const fields = [{\n    name: 'ricaIdPassport',\n    label: 'ID or Passport number',\n    required: true,\n    value: ''\n  }, {\n    name: 'Residential address the same as delivery address',\n    label: 'Proof of residential address',\n    type: 'checkbox',\n    checked: true\n  }, // for rest of the fields check if\n  // same as residential address is checked?\n  // if checked prefill the fields otherwise don't\n  {\n    name: 'nameAndSurname',\n    label: 'Full name and surname',\n    required: true,\n    value: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getBestRecipient)() || ''\n  }, {\n    name: 'street',\n    label: 'Street address',\n    required: true,\n    value: selectedAddress?.street || ''\n  }, {\n    name: 'neighborhood',\n    label: 'Suburb',\n    value: selectedAddress?.neighborhood || ''\n  }, {\n    name: 'city',\n    label: 'City',\n    required: true,\n    value: selectedAddress?.city || ''\n  }, {\n    name: 'postalCode',\n    label: 'Postal code',\n    value: selectedAddress?.postalCode || '',\n    type: 'tel',\n    minlength: 4,\n    maxLength: 4\n  }, {\n    name: 'state',\n    label: 'Province',\n    type: 'dropdown',\n    options: [{\n      value: '',\n      label: 'Select'\n    }, {\n      value: 'EC',\n      label: 'Eastern Cape'\n    }, {\n      value: 'FS',\n      label: 'Free State'\n    }, {\n      value: 'GP',\n      label: 'Gauteng'\n    }, {\n      value: 'KZN',\n      label: 'KwaZulu-Natal'\n    }, {\n      value: 'LP',\n      label: 'Limpopo'\n    }, {\n      value: 'MP',\n      label: 'Mpumalanga'\n    }, {\n      value: 'NC',\n      label: 'Northern Cape'\n    }, {\n      value: 'NW',\n      label: 'North West'\n    }, {\n      value: 'WC',\n      label: 'Western Cape'\n    }]\n  }, {\n    name: 'country',\n    label: 'Country',\n    type: 'dropdown',\n    disabled: true,\n    options: [{\n      value: 'ZAF',\n      label: 'South Africa'\n    }]\n  }];\n  const formFields = fields.map(field => (0,_Elements_FormField__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(field)).join('');\n  return `\n    ${formFields}\n  `;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RICAForm);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/RICAForm.js?");

/***/ }),

/***/ "./src/partials/Deliver/TVLicenseForm.js":
/*!***********************************************!*\
  !*** ./src/partials/Deliver/TVLicenseForm.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Elements_FormField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elements/FormField */ \"./src/partials/Deliver/Elements/FormField.js\");\n\n\nconst TVLicenseForm = () => {\n  const field = {\n    name: 'tvLicense',\n    label: 'SA ID number',\n    required: true,\n    value: ''\n  };\n  return `\n    ${(0,_Elements_FormField__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(field)}\n  `;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TVLicenseForm);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/TVLicenseForm.js?");

/***/ }),

/***/ "./src/partials/Deliver/constants.js":
/*!*******************************************!*\
  !*** ./src/partials/Deliver/constants.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"furnitureForm\": () => (/* binding */ furnitureForm),\n/* harmony export */   \"requiredAddressFields\": () => (/* binding */ requiredAddressFields),\n/* harmony export */   \"requiredFurnitureFields\": () => (/* binding */ requiredFurnitureFields),\n/* harmony export */   \"requiredRicaFields\": () => (/* binding */ requiredRicaFields),\n/* harmony export */   \"validAddressTypes\": () => (/* binding */ validAddressTypes)\n/* harmony export */ });\n/* eslint-disable import/prefer-default-export */\nconst furnitureForm = {\n  buildingType: [{\n    value: '',\n    label: 'Select'\n  }, {\n    value: 'freeStanding',\n    label: 'Free standing'\n  }, {\n    value: 'houseInComplex',\n    label: 'House in complex'\n  }, {\n    value: 'townhouse',\n    label: 'Townhouse'\n  }, {\n    value: 'apartment',\n    label: 'Apartment'\n  }],\n  parkingDistance: [{\n    value: 15,\n    label: 15\n  }, {\n    value: 25,\n    label: 25\n  }, {\n    value: 50,\n    label: 50\n  }, {\n    value: 100,\n    label: 100\n  }],\n  deliveryFloor: [{\n    value: 'ground',\n    label: 'Ground'\n  }, {\n    value: '1',\n    label: '1'\n  }, {\n    value: '2',\n    label: '2'\n  }, {\n    value: '3+',\n    label: '3+'\n  }],\n  liftStairs: [{\n    value: 'lift',\n    label: 'Lift'\n  }, {\n    value: 'stairs',\n    label: 'Stairs'\n  }]\n};\nconst requiredAddressFields = ['receiverName', 'complement', 'street', 'neighborhood', 'state', 'city', 'country', 'postalCode'];\nconst requiredFurnitureFields = ['buildingType', 'assembleFurniture', 'deliveryFloor', 'hasSufficientSpace', 'liftOrStairs', 'parkingDistance'];\nconst requiredRicaFields = ['tvID'];\nconst validAddressTypes = ['residential', 'inStore', 'commercial', 'giftRegistry', 'pickup', 'search'];\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/constants.js?");

/***/ }),

/***/ "./src/partials/Deliver/utils.js":
/*!***************************************!*\
  !*** ./src/partials/Deliver/utils.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addressIsValid\": () => (/* binding */ addressIsValid),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"getBestRecipient\": () => (/* binding */ getBestRecipient),\n/* harmony export */   \"initGoogleAutocomplete\": () => (/* binding */ initGoogleAutocomplete),\n/* harmony export */   \"isSelectedAddress\": () => (/* binding */ isSelectedAddress),\n/* harmony export */   \"mapGoogleAddress\": () => (/* binding */ mapGoogleAddress),\n/* harmony export */   \"parseAttribute\": () => (/* binding */ parseAttribute),\n/* harmony export */   \"populateAddressForm\": () => (/* binding */ populateAddressForm),\n/* harmony export */   \"populateExtraFields\": () => (/* binding */ populateExtraFields),\n/* harmony export */   \"setAddress\": () => (/* binding */ setAddress),\n/* harmony export */   \"setDeliveryLoading\": () => (/* binding */ setDeliveryLoading),\n/* harmony export */   \"submitAddressForm\": () => (/* binding */ submitAddressForm),\n/* harmony export */   \"submitDeliveryForm\": () => (/* binding */ submitDeliveryForm)\n/* harmony export */ });\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/functions */ \"./src/utils/functions.js\");\n/* harmony import */ var _utils_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/services */ \"./src/utils/services.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ \"./src/partials/Deliver/constants.js\");\n\n\n\nconst setDeliveryLoading = () => {\n  document.querySelector('.bash--delivery-container').classList.add('shimmer');\n};\nconst mapGoogleAddress = (addressComponents, geometry) => {\n  const streetNumber = addressComponents.find(item => item.types.includes('street_number'))?.long_name;\n  const street = addressComponents.find(item => item.types.includes('route'))?.long_name;\n  const neighborhood = addressComponents.find(item => item.types.includes('sublocality'))?.long_name;\n  const city = addressComponents.find(item => item.types.includes('locality'))?.long_name;\n  const postalCode = addressComponents.find(item => item.types.includes('postal_code'))?.long_name;\n  const state = addressComponents.find(item => item.types.includes('administrative_area_level_1'))?.long_name;\n  const coords = {\n    lat: '',\n    lng: ''\n  };\n\n  if (geometry) {\n    coords.lat = geometry.location.lat();\n    coords.lng = geometry.location.lng();\n  }\n\n  return {\n    street: `${streetNumber ?? ''} ${street ?? ''}`.trim(),\n    neighborhood,\n    city,\n    postalCode,\n    state,\n    ...coords\n  };\n};\n\nconst provinceShortCode = province => {\n  switch (province) {\n    case 'Select':\n      return '';\n\n    case 'Western Cape':\n      return 'WC';\n\n    case 'Easter Cape':\n      return 'EC';\n\n    case 'Gauteng':\n      return 'GP';\n\n    case 'KwaZulu-Natal':\n    case 'KwaZulu Natal':\n      return 'KZN';\n\n    case 'Northern Cape':\n      return 'NC';\n\n    case 'Limpopo':\n      return 'LP';\n\n    case 'Mpumalanga':\n      return 'MP';\n\n    case 'North West':\n      return 'NW';\n\n    case 'Freestate':\n    case 'Free State':\n      return 'FS';\n\n    default:\n      return province;\n  }\n};\n\nconst populateAddressFromSearch = address => {\n  const {\n    street,\n    neighborhood,\n    postalCode,\n    state,\n    city\n  } = address; // Clear any populated fields\n\n  document.getElementById('bash--address-form').reset();\n  document.getElementById('bash--input-number').value = '';\n  document.getElementById('bash--input-street').value = street;\n  document.getElementById('bash--input-neighborhood').value = neighborhood;\n  document.getElementById('bash--input-city').value = city;\n  document.getElementById('bash--input-postalCode').value = postalCode;\n  document.getElementById('bash--input-state').value = provinceShortCode(state);\n};\n\nconst populateAddressForm = address => {\n  console.info('populateAddressForm', {\n    address\n  });\n  const {\n    street,\n    neighborhood,\n    postalCode,\n    state,\n    city,\n    receiverName,\n    complement,\n    id,\n    addressName\n  } = address; // Clear any populated fields\n\n  document.getElementById('bash--address-form').reset(); // Only overwrite defaults if values exist.\n\n  if (receiverName) document.getElementById('bash--input-receiverName').value = receiverName;\n  if (complement) document.getElementById('bash--input-complement').value = complement; // addressId indicates that address is being edited / completed.\n\n  if (id) document.getElementById('bash--input-addressId').value = id;\n  if (id) document.getElementById('bash--input-addressName').value = addressName;\n  document.getElementById('bash--input-number').value = '';\n  document.getElementById('bash--input-street').value = street;\n  document.getElementById('bash--input-neighborhood').value = neighborhood;\n  document.getElementById('bash--input-city').value = city;\n  document.getElementById('bash--input-postalCode').value = postalCode;\n  document.getElementById('bash--input-state').value = provinceShortCode(state); // TODO Furniture, Rica fields.\n  // Ensure it happens after they are in the DOM.\n};\nconst initGoogleAutocomplete = () => {\n  const input = document.getElementById('bash--input-address-search');\n  const autocomplete = new window.google.maps.places.Autocomplete(input, {\n    componentRestrictions: {\n      country: 'ZA'\n    }\n  });\n  window.google.maps.event.addListener(autocomplete, 'place_changed', () => {\n    const place = autocomplete.getPlace();\n    const {\n      address_components: addressComponents,\n      geometry\n    } = place;\n    const address = mapGoogleAddress(addressComponents, geometry); // Populate the form\n    // Set view to add-address\n\n    populateAddressFromSearch(address);\n    window.postMessage({\n      action: 'setDeliveryView',\n      view: 'address-form'\n    });\n  });\n};\nconst parseAttribute = data => JSON.parse(decodeURIComponent(data));\nconst populateExtraFields = (address, fields) => {\n  for (let i = 0; i < fields.length; i++) {\n    if (!document.getElementById(`bash--input-${fields[i]}`)) continue;\n    if (address[fields[i]]) document.getElementById(`bash--input-${fields[i]}`).value = address[fields[i]];\n  }\n}; // Runs when you setAddress\n\nconst addressIsValid = address => {\n  const {\n    items\n  } = window.vtexjs.checkout.orderForm;\n  const {\n    hasFurniture,\n    hasTVs,\n    hasSimCards\n  } = (0,_utils_functions__WEBPACK_IMPORTED_MODULE_0__.getSpecialCategories)(items);\n  const extraFieldsForm = document.forms['bash-delivery-form'];\n  let requiredFields = [];\n  const invalidFields = []; // TODO more fields for Rica (sim?)\n\n  requiredFields = [..._constants__WEBPACK_IMPORTED_MODULE_2__.requiredAddressFields]; // Clear the extra fields.\n\n  if (extraFieldsForm && (hasFurniture || hasTVs || hasSimCards)) {\n    extraFieldsForm.reset();\n  }\n\n  if (hasFurniture) {\n    populateExtraFields(address, _constants__WEBPACK_IMPORTED_MODULE_2__.requiredFurnitureFields);\n    requiredFields = [...requiredFields, ..._constants__WEBPACK_IMPORTED_MODULE_2__.requiredFurnitureFields];\n  }\n\n  if (hasTVs || hasSimCards) {\n    populateExtraFields(address, _constants__WEBPACK_IMPORTED_MODULE_2__.requiredRicaFields);\n    requiredFields = [...requiredFields, ..._constants__WEBPACK_IMPORTED_MODULE_2__.requiredRicaFields];\n  }\n\n  for (let i = 0; i < requiredFields.length; i++) {\n    if (!address[requiredFields[i]]) invalidFields.push(requiredFields[i]);\n  }\n\n  return {\n    isValid: !invalidFields.length,\n    invalidFields\n  };\n}; // TODO move somewhere else?\n\nconst setAddress = address => {\n  const {\n    isValid,\n    invalidFields\n  } = addressIsValid(address);\n\n  if (!isValid) {\n    populateAddressForm(address);\n    $('#bash--address-form').addClass('show-form-errors');\n    $('#bash--delivery-form')?.addClass('show-form-errors');\n    $(`#bash--input-${invalidFields[0]}`).focus();\n\n    if (_constants__WEBPACK_IMPORTED_MODULE_2__.requiredAddressFields.includes(invalidFields[0])) {\n      window.postMessage({\n        action: 'setDeliveryView',\n        view: 'address-form'\n      });\n    }\n\n    return;\n  } // Fix bad addressType.\n\n\n  if (address.addressType === 'business') address.addressType = 'commercial';\n  if (!_constants__WEBPACK_IMPORTED_MODULE_2__.validAddressTypes.includes(address.addressType)) address.addressType = 'residential';\n  const {\n    shippingData\n  } = window?.vtexjs?.checkout?.orderForm;\n  shippingData.address = address;\n  shippingData.address.number = shippingData.address.number ?? ' ';\n  shippingData.selectedAddresses = [address]; // Start Shimmering\n\n  setDeliveryLoading();\n  window.vtexjs.checkout.sendAttachment('shippingData', shippingData).then(result => {\n    // End shimmer\n    console.info('setAddress', {\n      result\n    });\n  }).done(() => (0,_utils_functions__WEBPACK_IMPORTED_MODULE_0__.clearLoaders)());\n};\nconst submitAddressForm = async event => {\n  event.preventDefault();\n  const form = document.forms['bash--address-form'];\n  const fields = ['addressId', 'addressName', 'addressType', 'receiverName', 'postalCode', 'city', 'state', 'country', 'street', 'neighborhood', 'complement'];\n  const address = {\n    isDisposable: false,\n    reference: null,\n    geoCoordinates: [],\n    number: '',\n    country: 'ZAF'\n  };\n\n  for (let f = 0; f < fields.length; f++) {\n    address[fields[f]] = form[fields[f]]?.value || null;\n  }\n\n  address.addressName = address.addressName || address.addressId;\n  address.addressId = address.addressId || address.addressName; // Apply the selected address to customers orderForm.\n  // TODO deselect the currently checked address, select this address.\n\n  const checkoutAddress = await setAddress(address); // Update the localstore, and the API\n\n  const savedAddress = await (0,_utils_services__WEBPACK_IMPORTED_MODULE_1__.addOrUpdateAddress)(address);\n  console.info({\n    savedAddress,\n    checkoutAddress\n  });\n  window.postMessage({\n    action: 'setDeliveryView',\n    view: 'select-address'\n  });\n};\nconst submitDeliveryForm = event => {\n  event.preventDefault();\n  const form = document.forms['bash--delivery-form'];\n  console.info({\n    form\n  });\n  let fullAddress = {};\n  const {\n    address\n  } = window.vtexjs.checkout.orderForm;\n  fullAddress = { ...address\n  };\n  setAddress(fullAddress); // Set address in orderForm\n  // Save address info locally\n  // Send saved address to API\n\n  window.location.hash = 'payment';\n};\nconst getBestRecipient = () => {\n  const {\n    receiverName\n  } = window.vtexjs.checkout.orderForm?.shippingData?.address;\n  const {\n    firstName,\n    lastName\n  } = window.vtexjs.checkout.orderForm?.clientProfileData;\n  const clientProfileName = `${firstName ?? ''} ${lastName ?? ''}`.trim();\n  return receiverName || document.getElementById('client-first-name')?.value || clientProfileName;\n};\nconst isSelectedAddress = (address, selectedAddress) => {\n  const addressObject = JSON.stringify({\n    street: address.street,\n    neighborhood: address.neighborhood,\n    city: address.city,\n    postalCode: address.postalCode\n  });\n  const selectedAddressObject = JSON.stringify({\n    street: selectedAddress.street,\n    neighborhood: selectedAddress.neighborhood,\n    city: selectedAddress.city,\n    postalCode: selectedAddress.postalCode\n  });\n  return addressObject === selectedAddressObject;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mapGoogleAddress);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/partials/Deliver/utils.js?");

/***/ }),

/***/ "./src/utils/checkoutDB.js":
/*!*********************************!*\
  !*** ./src/utils/checkoutDB.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass CheckoutDB {\n  constructor() {\n    this.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB || window.shimIndexedDB;\n    this.checkoutDB = indexedDB.open('checkoutDB', 1.2);\n\n    this.checkoutDB.onerror = event => {\n      console.error('CheckoutDB Error', {\n        event\n      });\n      throw new Error('Could not load checkoutDB');\n    };\n\n    this.checkoutDB.onupgradeneeded = () => {\n      const db = this.checkoutDB.result;\n      const store = db.createObjectStore('addresses', {\n        keyPath: 'addressName'\n      });\n      store.createIndex('address_street', ['street'], {\n        unique: false\n      });\n      store.createIndex('address_addressName', ['addressName'], {\n        unique: true\n      });\n      store.createIndex('address_street_suburb_city_postal', ['street', 'neighborhood', 'city', 'postalCode'], {\n        unique: true\n      });\n    };\n\n    this.checkoutDB.onsuccess = () => {\n      const db = this.checkoutDB.result;\n      const transaction = db.transaction('addresses', 'readwrite');\n      this.addresses = transaction.objectStore('addresses'); // Close DB connection\n\n      transaction.oncomplete = () => {// db.close();\n      };\n    };\n  }\n\n  store() {\n    const db = this.checkoutDB.result;\n    const transaction = db.transaction('addresses', 'readwrite');\n    return transaction.objectStore('addresses');\n  }\n\n  loadAddresses(addresses) {\n    const queries = [];\n    console.info('loadAddresses', {\n      addresses\n    });\n    return Promise.all(addresses.map(address => this.addOrUpdateAddress(address))).then(loadedAddress => {\n      console.info({\n        loadedAddress,\n        queries\n      });\n    });\n  }\n\n  addOrUpdateAddress(address) {\n    console.info('addOrUpdateAddress', {\n      address\n    });\n    const thisDb = this;\n    return new Promise((resolve, reject) => {\n      const query = thisDb.store().put(address);\n\n      query.onsuccess = () => {\n        console.info('addOrUpdateAddress success');\n        resolve(query.result);\n      };\n\n      query.onerror = () => {\n        console.error('Something wrong with addOrUpdateAddress ? ...');\n        reject(new Error('Address could not be stored locally'));\n      };\n    });\n  }\n\n  getAddresses() {\n    const thisDb = this;\n    return new Promise(resolve => {\n      const query = thisDb.store().getAll();\n\n      query.onsuccess = () => {\n        console.info('getAddresses success');\n        resolve(query.result);\n      };\n\n      query.onerror = () => {\n        console.error('Something wrong with getAddresses ? ...');\n        resolve([]);\n      };\n    });\n  }\n\n  getAddress(id) {\n    const query = this.addresses.get(id);\n\n    query.onsuccess = () => {\n      console.info('getAddress', query.result);\n      return query.result;\n    };\n  }\n\n  deleteAddress(id) {\n    const query = this.addresses.delete(id);\n\n    query.onsuccess = () => {\n      console.info('deleteAddress', query.result);\n      return query.result;\n    };\n  }\n\n  dropDB() {\n    this.indexedDB.deleteDatabase('checkoutDB');\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CheckoutDB);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/utils/checkoutDB.js?");

/***/ }),

/***/ "./src/utils/const.js":
/*!****************************!*\
  !*** ./src/utils/const.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AD_TYPE\": () => (/* binding */ AD_TYPE),\n/* harmony export */   \"BASE_URL_API\": () => (/* binding */ BASE_URL_API),\n/* harmony export */   \"COUNTRIES\": () => (/* binding */ COUNTRIES),\n/* harmony export */   \"COUNTRIES_AVAILABLES\": () => (/* binding */ COUNTRIES_AVAILABLES),\n/* harmony export */   \"FURNITURE_APP\": () => (/* binding */ FURNITURE_APP),\n/* harmony export */   \"FURNITURE_CAT\": () => (/* binding */ FURNITURE_CAT),\n/* harmony export */   \"FURNITURE_FEES\": () => (/* binding */ FURNITURE_FEES),\n/* harmony export */   \"FURNITURE_FEE_LINK\": () => (/* binding */ FURNITURE_FEE_LINK),\n/* harmony export */   \"RICA_APP\": () => (/* binding */ RICA_APP),\n/* harmony export */   \"SIM_CAT\": () => (/* binding */ SIM_CAT),\n/* harmony export */   \"STEPS\": () => (/* binding */ STEPS),\n/* harmony export */   \"TIMEOUT_500\": () => (/* binding */ TIMEOUT_500),\n/* harmony export */   \"TIMEOUT_750\": () => (/* binding */ TIMEOUT_750),\n/* harmony export */   \"TV_APP\": () => (/* binding */ TV_APP),\n/* harmony export */   \"TV_CAT\": () => (/* binding */ TV_CAT)\n/* harmony export */ });\n// Checkout steps\nconst STEPS = {\n  CART: '#/cart',\n  PROFILE: '#/profile',\n  SHIPPING: '#/shipping',\n  PAYMENT: '#/payment'\n}; // Address types\n\nconst AD_TYPE = {\n  PICKUP: 'search',\n  DELIVERY: 'residential'\n}; // TIMEOUT\n\nconst TIMEOUT_500 = 500;\nconst TIMEOUT_750 = 750; // APP CONFIGURATION IDs\n\nconst RICA_APP = 'ricafields';\nconst TV_APP = 'tvfields';\nconst FURNITURE_APP = 'furniturefields'; // Furniture fees Url\n\nconst FURNITURE_FEES = 'http://image.tfgmedia.co.za/image/1/process/500x790?source=http://cdn.tfgmedia.co.za' + '/15/Marketing/HTMLPages/Furniture_Delivery_Fees_tab_image.jpg';\nconst COUNTRIES = {\n  za: {\n    code: 'za',\n    phonePlaceholder: '(+27)'\n  } // South Africa\n\n};\nconst COUNTRIES_AVAILABLES = [COUNTRIES.za.code];\nconst BASE_URL_API = window.location.host.includes('bash.com') ? 'https://store-api.www.bash.com/custom-api/' : `${window.location.protocol}//${window.location.host}/custom-api/`;\nconst FURNITURE_FEE_LINK = `\n<a \n  href=\"${FURNITURE_FEES}\"\n  class=\"furniture-fees-link\" \n  target=\"_blank\"\n>\n  Furniture delivery costs\n</a>\n`;\nconst FURNITURE_CAT = '1169288799';\nconst TV_CAT = '938942995';\nconst SIM_CAT = '24833302';\n\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/utils/const.js?");

/***/ }),

/***/ "./src/utils/functions.js":
/*!********************************!*\
  !*** ./src/utils/functions.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addBorderTop\": () => (/* binding */ addBorderTop),\n/* harmony export */   \"checkoutGetCustomData\": () => (/* binding */ checkoutGetCustomData),\n/* harmony export */   \"checkoutSendCustomData\": () => (/* binding */ checkoutSendCustomData),\n/* harmony export */   \"clearLoaders\": () => (/* binding */ clearLoaders),\n/* harmony export */   \"getShippingData\": () => (/* binding */ getShippingData),\n/* harmony export */   \"getSpecialCategories\": () => (/* binding */ getSpecialCategories),\n/* harmony export */   \"isValidNumberBash\": () => (/* binding */ isValidNumberBash),\n/* harmony export */   \"saveAddress\": () => (/* binding */ saveAddress),\n/* harmony export */   \"setMasterdataFields\": () => (/* binding */ setMasterdataFields),\n/* harmony export */   \"setRicaFields\": () => (/* binding */ setRicaFields),\n/* harmony export */   \"waitAndResetLocalStorage\": () => (/* binding */ waitAndResetLocalStorage)\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const */ \"./src/utils/const.js\");\n/* harmony import */ var _phoneFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./phoneFields */ \"./src/utils/phoneFields.js\");\n\n // API Functions\n\nconst catchError = message => {\n  console.error('ERROR', message);\n  throw new Error(message);\n};\n\nconst getHeadersByConfig = ({\n  cookie,\n  cache,\n  json\n}) => {\n  const headers = new Headers();\n  if (cookie) headers.append('Cookie', document?.cookie);\n  if (cache) headers.append('Cache-Control', 'no-cache');\n  if (json) headers.append('Content-type', 'application/json');\n  return headers;\n}; // TODO remove when no longer used in favour of services.\n\n\nconst getShippingData = async (addressName, fields) => {\n  let data = {};\n  const headers = getHeadersByConfig({\n    cookie: true,\n    cache: true,\n    json: false\n  });\n  const options = {\n    headers,\n    credentials: 'include'\n  };\n  const response = await fetch(`${_const__WEBPACK_IMPORTED_MODULE_0__.BASE_URL_API}masterdata/addresses/${fields}&_where=addressName=${addressName}&timestamp=${Date.now()}`, options).then(res => res.json()).catch(error => catchError(`GET_ADDRESS_ERROR: ${error?.message}`));\n\n  if (response && !response.error && response.data && response.data.length > 0) {\n    [data] = response.data;\n  }\n\n  return data;\n}; // TODO remove when no longer used in favour of services.\n\n\nconst saveAddress = async (fields = {}) => {\n  let path;\n  const {\n    email\n  } = window.vtexjs.checkout.orderForm.clientProfileData;\n  const {\n    address\n  } = window.vtexjs.checkout.orderForm.shippingData;\n  if (!address) return; // Address already exists (?)\n\n  const savedAddress = address?.addressId ? await getShippingData(address.addressId, '?_fields=id') : {}; // Guardado del nuevo addressType\n\n  address.addressType = localStorage.getItem('addressType');\n\n  if (savedAddress?.id) {\n    path = `${_const__WEBPACK_IMPORTED_MODULE_0__.BASE_URL_API}masterdata/address/${savedAddress.id}`;\n  } else {\n    path = `${_const__WEBPACK_IMPORTED_MODULE_0__.BASE_URL_API}masterdata/addresses`;\n  }\n\n  address.complement = address.complement || (0,_phoneFields__WEBPACK_IMPORTED_MODULE_1__.getBestPhoneNumber)(); // Importante respetar el orden de address para no sobreescribir receiver, complement y neighborhood\n\n  const newAddress = {\n    userId: email,\n    ...address,\n    ...fields\n  };\n\n  if (!savedAddress.id) {\n    newAddress.addressName = address.addressId;\n  }\n\n  const headers = getHeadersByConfig({\n    cookie: true,\n    cache: true,\n    json: true\n  });\n  const options = {\n    method: 'PATCH',\n    headers,\n    body: JSON.stringify(newAddress),\n    credentials: 'include'\n  };\n  await fetch(path, options).then(res => {\n    localStorage.setItem('shippingDataCompleted', true);\n\n    if (res.status !== 204) {\n      res.json();\n    }\n  }).catch(error => catchError(`SAVE_ADDRESS_ERROR: ${error?.message}`));\n};\n\nconst setMasterdataFields = async (completeFurnitureForm, completeTVIDForm, tries = 1) => {\n  /* Data will only be searched and set if any of the custom fields for TFG are displayed. */\n  if (completeFurnitureForm || completeTVIDForm) {\n    const {\n      address\n    } = window.vtexjs.checkout.orderForm.shippingData;\n    /* Setting Masterdata custom fields */\n\n    const fields = '?_fields=buildingType,parkingDistance,deliveryFloor,liftOrStairs,hasSufficientSpace,assembleFurniture,tvID';\n    const shippingData = await getShippingData(address.addressId, fields);\n\n    if (shippingData && !jQuery.isEmptyObject(shippingData)) {\n      /* Setting furniture form values */\n      if (completeFurnitureForm) {\n        $('#tfg-building-type').val(shippingData.buildingType);\n        $('#tfg-parking-distance').val(shippingData.parkingDistance);\n        $('#tfg-delivery-floor').val(shippingData.deliveryFloor);\n\n        if ($('#tfg-delivery-floor').val() === 'Ground') {\n          $('#tfg-lift-stairs').attr('disabled', 'disabled');\n        } else {\n          $('#tfg-lift-stairs').val(shippingData.liftOrStairs);\n        }\n\n        $('#tfg-sufficient-space').prop('checked', shippingData.hasSufficientSpace);\n        $('#tfg-assemble-furniture').prop('checked', shippingData.assembleFurniture);\n      }\n      /* Setting TV form values */\n\n\n      if (completeTVIDForm) {\n        $('#tfg-tv-licence').val(shippingData.tvID);\n      }\n    } else if (tries <= 5) {\n      setTimeout(() => {\n        setMasterdataFields(completeFurnitureForm, completeTVIDForm, tries += 1);\n      }, 3000);\n    }\n  }\n}; // Functions to manage CustomData\n\n\nconst checkoutGetCustomData = appId => {\n  const {\n    customData\n  } = window.vtexjs.checkout.orderForm;\n  let fields = {};\n\n  if (customData && customData.customApps && customData.customApps.length > 0) {\n    customData.customApps.forEach(app => {\n      if (app.id === appId) {\n        fields = app.fields;\n      }\n    });\n  }\n\n  return fields;\n};\n\nconst checkoutSendCustomData = (appId, customData) => {\n  const {\n    orderFormId\n  } = window.vtexjs.checkout.orderForm;\n  return $.ajax({\n    type: 'PUT',\n    url: `/api/checkout/pub/orderForm/${orderFormId}/customData/${appId}`,\n    dataType: 'json',\n    contentType: 'application/json; charset=utf-8',\n    data: JSON.stringify(customData)\n  });\n};\n\nconst setRicaFields = (getDataFrom = 'customApps') => {\n  let ricaFields;\n\n  if (getDataFrom === 'shippingAddress') {\n    const {\n      address\n    } = window.vtexjs.checkout.orderForm.shippingData;\n    ricaFields = {\n      idOrPassport: '',\n      sameAddress: 'true',\n      fullName: address.receiverName || $('#ship-receiverName').val(),\n      streetAddress: `${address.street}, ${address.number}`,\n      suburb: address.neighborhood,\n      city: address.city,\n      postalCode: address.postalCode,\n      province: address.state\n    };\n  } else if (getDataFrom === 'customApps') {\n    ricaFields = checkoutGetCustomData(_const__WEBPACK_IMPORTED_MODULE_0__.RICA_APP);\n  }\n\n  if (ricaFields && !jQuery.isEmptyObject(ricaFields)) {\n    if (getDataFrom === 'customApps') {\n      $('#tfg-rica-id-passport').val(ricaFields.idOrPassport);\n      $('#tfg-rica-same-address').prop('checked', ricaFields.sameAddress === 'true');\n    }\n\n    $('#tfg-rica-fullname').val(ricaFields.fullName);\n    $('#tfg-rica-street').val(ricaFields.streetAddress);\n    $('#tfg-rica-suburb').val(ricaFields.suburb);\n    $('#tfg-rica-city').val(ricaFields.city);\n    $('#tfg-rica-postal-code').val(ricaFields.postalCode);\n    $('#tfg-rica-province').val(ricaFields.province);\n  }\n}; // Random Functions\n\n\nconst addBorderTop = elementClass => {\n  $(elementClass).addClass('custom-step-border');\n  $(elementClass).last().addClass('last-custom-step-border');\n};\n\nconst waitAndResetLocalStorage = () => {\n  setTimeout(() => {\n    localStorage.removeItem('shippingDataCompleted');\n  }, 5000);\n};\n\nconst isValidNumberBash = tel => (0,_phoneFields__WEBPACK_IMPORTED_MODULE_1__.validatePhoneNumber)(tel);\n\nconst getSpecialCategories = items => {\n  const furnitureCategories = [_const__WEBPACK_IMPORTED_MODULE_0__.FURNITURE_CAT];\n  const tvCategories = [_const__WEBPACK_IMPORTED_MODULE_0__.TV_CAT];\n  const simCardCategories = [_const__WEBPACK_IMPORTED_MODULE_0__.SIM_CAT];\n  const categories = [];\n  let hasTVs = false;\n  let hasSimCards = false;\n  let hasFurniture = false;\n  items.forEach(item => {\n    const itemCategories = item.productCategoryIds.split('/');\n    categories.push(itemCategories);\n    itemCategories.forEach(category => {\n      if (!category) return;\n      if (tvCategories.includes(category)) hasTVs = true;\n      if (simCardCategories.includes(category)) hasSimCards = true;\n      if (furnitureCategories.includes(category)) hasFurniture = true;\n    });\n  });\n  return {\n    hasFurniture,\n    hasSimCards,\n    hasTVs,\n    categories\n  };\n};\n\nconst clearLoaders = () => {\n  $('.shimmer').removeClass('shimmer');\n};\n\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/utils/functions.js?");

/***/ }),

/***/ "./src/utils/phoneFields.js":
/*!**********************************!*\
  !*** ./src/utils/phoneFields.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"getBestPhoneNumber\": () => (/* binding */ getBestPhoneNumber),\n/* harmony export */   \"preparePhoneField\": () => (/* binding */ preparePhoneField),\n/* harmony export */   \"validatePhoneNumber\": () => (/* binding */ validatePhoneNumber)\n/* harmony export */ });\n/**\n * validatePhoneNumber\n * Determine if number is valid.\n * Numbers and spaces only, 9 digits or longer.\n * @param tel - string\n * @returns boolean\n */\nconst validatePhoneNumber = tel => {\n  if (!tel) return false;\n  tel = tel.replace(/\\s/g, '');\n  if (tel[0] === '0') return tel.match(/[0-9\\s]{10}/);\n  return tel.match(/[0-9\\s]{9,}/);\n};\n/**\n * formattedPhoneNumber\n * Add spaces to help guide the user how the number should look.\n * Adds space after 3rd and 6th digits only.\n * xxx xxx xxxxxxxxx\n * @param value - string value\n * @returns string\n */\n\nconst formattedPhoneNumber = (value, doFormat = true) => {\n  value = value.replace(/[^0-9+*#]+/g, '').trim(); // 'xxx xxx *'\n\n  if (value.length >= 6 && doFormat) {\n    return [value.slice(0, 3), value.slice(3, 6), value.slice(6)].join(' ');\n  } // 'xxx *'\n\n\n  if (value.length >= 3 && doFormat) {\n    return [value.slice(0, 3), value.slice(3)].join(' ');\n  }\n\n  return value;\n};\n/**\n * preparePhoneField\n * When phone fields are loaded onto the DOM\n * Prepare them for proper display and validation.\n *\n * @param  input - string css selector to the element.\n */\n\n\nconst preparePhoneField = input => {\n  const phoneInput = document.querySelector(input);\n  if (!phoneInput) return;\n  phoneInput.setAttribute('type', 'tel');\n  phoneInput.setAttribute('maxlength', 12);\n  phoneInput.value = formattedPhoneNumber(phoneInput.value);\n  const $phoneInput = $(input);\n  $phoneInput.keyup(e => {\n    const value = e.currentTarget.value.replace(/[^0-9+*#]+/g, '').trim();\n    let displayValue = value;\n    const isBackSpace = e.keyCode === 8;\n    displayValue = formattedPhoneNumber(value, !isBackSpace);\n    $phoneInput.parent('.text').removeClass('error');\n    $phoneInput.parent('.text').find('span.error').hide();\n    $phoneInput.val(displayValue);\n  });\n};\nconst getBestPhoneNumber = () => window.vtexjs.checkout.orderForm?.shippingData?.address?.complement || window.vtexjs.checkout.orderForm?.clientProfileData?.phone || document?.getElementById('client-phone')?.value;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  validatePhoneNumber\n});\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/utils/phoneFields.js?");

/***/ }),

/***/ "./src/utils/services.js":
/*!*******************************!*\
  !*** ./src/utils/services.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addOrUpdateAddress\": () => (/* binding */ addOrUpdateAddress),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"getAddresses\": () => (/* binding */ getAddresses),\n/* harmony export */   \"updateAddressListing\": () => (/* binding */ updateAddressListing),\n/* harmony export */   \"upsertAddress\": () => (/* binding */ upsertAddress)\n/* harmony export */ });\n/* harmony import */ var _partials_Deliver_AddressListing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../partials/Deliver/AddressListing */ \"./src/partials/Deliver/AddressListing.js\");\n/* harmony import */ var _checkoutDB__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checkoutDB */ \"./src/utils/checkoutDB.js\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./const */ \"./src/utils/const.js\");\n/* harmony import */ var _phoneFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./phoneFields */ \"./src/utils/phoneFields.js\");\n\n\n\n // API Functions\n\nconst catchError = message => {\n  console.error('ERROR', message);\n  throw new Error(message);\n};\n\nconst getHeadersByConfig = ({\n  cookie,\n  cache,\n  json\n}) => {\n  const headers = new Headers();\n  if (cookie) headers.append('Cookie', document?.cookie);\n  if (cache) headers.append('Cache-Control', 'no-cache');\n  if (json) headers.append('Content-type', 'application/json');\n  return headers;\n}; // GET addresses\n\n\nconst DB = new _checkoutDB__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\nconst getAddresses = async () => {\n  // Try to get addresses from users local store.\n  // TODO: When should addresses be reloaded/updated?\n  const addresses = await DB.getAddresses();\n  if (addresses.length > 0) return {\n    data: addresses\n  }; // Fallback to get addresses from API.\n\n  const {\n    email\n  } = window.vtexjs.checkout.orderForm?.clientProfileData;\n  const fields = ['id', 'addressType', 'addressQuery', 'addressName', 'reference', 'number', 'geolocation', 'receiverName', 'complement', 'companyBuilding', 'street', 'neighborhood', 'city', 'postalCode', 'state', 'country', 'buildingType', 'parkingDistance', 'deliveryFloor', 'liftOrStairs', 'hasSufficientSpace', 'assembleFurniture', 'tvID'].join(',');\n  const headers = getHeadersByConfig({\n    cookie: true,\n    cache: true,\n    json: false\n  });\n  const options = {\n    headers,\n    credentials: 'include'\n  };\n  const cacheBust = Date.now();\n  return fetch(`${_const__WEBPACK_IMPORTED_MODULE_2__.BASE_URL_API}masterdata/addresses?t=${cacheBust}&_fields=${fields}&_where=${encodeURIComponent(`userIdQuery=${email}`)}`, options).then(res => res.json()).then(data => {\n    console.info(data); // Store addresses locally\n\n    if (data.data) DB.loadAddresses(data.data);\n    return data;\n  }).catch(error => catchError(`GET_ADDRESSES_ERROR: ${error?.message}`));\n}; // GET Address by ID / Name?\n\nconst getAddress = async (addressName, fields) => {\n  let data = {};\n  const headers = getHeadersByConfig({\n    cookie: true,\n    cache: true,\n    json: false\n  });\n  const options = {\n    headers,\n    credentials: 'include'\n  };\n  const response = await fetch(`${_const__WEBPACK_IMPORTED_MODULE_2__.BASE_URL_API}masterdata/addresses/${fields}&_where=addressName=${addressName}&timestamp=${Date.now()}`, options).then(res => res.json()).catch(error => catchError(`GET_ADDRESS_ERROR: ${error?.message}`));\n\n  if (response && !response.error && response.data && response.data.length > 0) {\n    [data] = response.data;\n  }\n\n  return data;\n}; // PATCH address\n\n\nconst upsertAddress = async address => {\n  let path;\n  const {\n    email\n  } = window.vtexjs.checkout.orderForm.clientProfileData;\n  if (!address) return Promise.reject(new Error('No address provided.'));\n  console.info({\n    address\n  }); // Address already exists (?)\n\n  const savedAddress = address.addressName ? await getAddress(address.addressName, '?_fields=id') : {};\n  console.info({\n    savedAddress\n  });\n\n  if (savedAddress?.id) {\n    path = `${_const__WEBPACK_IMPORTED_MODULE_2__.BASE_URL_API}masterdata/address/${savedAddress.id}`;\n  } else {\n    path = `${_const__WEBPACK_IMPORTED_MODULE_2__.BASE_URL_API}masterdata/addresses`;\n  }\n\n  address.complement = address.complement || (0,_phoneFields__WEBPACK_IMPORTED_MODULE_3__.getBestPhoneNumber)(); // Importante respetar el orden de address para no sobreescribir receiver, complement y neighborhood\n\n  const newAddress = {\n    userId: email,\n    ...address\n  };\n\n  if (!savedAddress.id) {\n    newAddress.addressName = address.addressId || `address-${Date.now()}`;\n  }\n\n  console.info({\n    newAddress\n  });\n  const headers = getHeadersByConfig({\n    cookie: true,\n    cache: true,\n    json: true\n  });\n  const options = {\n    method: 'PATCH',\n    headers,\n    body: JSON.stringify(newAddress),\n    credentials: 'include'\n  };\n  await fetch(path, options).then(res => {\n    console.info({\n      res,\n      status: res.status\n    });\n\n    if (res.status !== 204) {\n      return res.json();\n    }\n\n    return res;\n  }).then(result => {\n    console.info({\n      result\n    });\n    return result;\n  }).catch(error => catchError(`SAVE_ADDRESS_ERROR: ${error?.message}`));\n}; // export const populateAddressList = () => {\n//   getAddresses().then(({ data: addresses }) => {\n//     // if(addresses.length < 1)... go to Add Address\n//     const addressesHtml = addresses.map((address) => AddressListing(address));\n//     document.getElementById('bash-address-list').innerHTML = addressesHtml.join('');\n//     clearLoaders();\n//   });\n// };\n\nconst updateAddressListing = address => {\n  let $currentListing = $(`#address-${address.addressName}`);\n  $currentListing.after((0,_partials_Deliver_AddressListing__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(address));\n  $currentListing.remove();\n  $currentListing = null;\n};\nconst addOrUpdateAddress = async address => {\n  address.id = address.id || address.addressId;\n  DB.addOrUpdateAddress(address).then(() => updateAddressListing(address)); // Add or update at the API.\n\n  upsertAddress(address);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getAddresses);\n\n//# sourceURL=webpack://custom-shipping-step-by-items/./src/utils/services.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/checkout6-custom.js");
/******/ 	
/******/ })()
;